<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/index.css">
    
</head>
<body>
    <main>
        <div class="audio-container">
            <audio id="backgroundAudio" autoplay loop controls  style="display:none">
                <source src="/assets/son/ambiance.mp3" type="audio/mp3">
                Votre navigateur ne supporte pas l'élément audio.
            </audio>

            <button id="toggleSoundButton" class="audio">On</button>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var audio = document.getElementById('backgroundAudio');
                var toggleButton = document.getElementById('toggleSoundButton');

                // Gérer le chargement des métadonnées de l'audio
                audio.addEventListener('loadedmetadata', function () {
                    // Démarrer en mode muet
                    audio.muted = true;
                });

                // Gérer le clic sur le bouton pour activer/désactiver le son
                toggleButton.addEventListener('click', function () {
                    if (audio.paused) {
                        // Si la lecture est en pause, relancer le son
                        audio.play().then(function () {
                            audio.loop = true; // Activer le bouclage
                            toggleButton.textContent = 'Off';
                        }).catch(function (error) {
                            console.error('Erreur lors de la lecture du son :', error);
                        });
                    } else {
                        // Mettre en pause le son
                        audio.pause();
                        toggleButton.textContent = 'On';
                    }
                });
            });
        </script>

        <div class="galaxy" id="galaxyContainer">
            <div class="galaxy-slide">
                <div class="planetes">
                    <a href="./planete.html" class="planete1 flex-planete">
                        <img class="img-planete" src="./assets/image/planete/1.svg" alt="Dessin de planète">
                        <p class="hover-planete">Premier nom</p>
                    </a>
                    
                    <div class="planete2 flex-planete">
                        <img class="img-planete" src="./assets/image/planete/2.svg" alt="Dessin de planète">
                        <p class="hover-planete">Deuxième nom</p>
                    </div>
                    
                    <div class="planete3 flex-planete">
                        <img class="img-planete" src="./assets/image/planete/3.svg" alt="Dessin de planète">
                        <p class="hover-planete">Troisième nom</p>
                    </div>
                    
                    <div class="planete4 flex-planete">
                        <img class="img-planete" src="./assets/image/planete/4.svg" alt="Dessin de planète">
                        <p class="hover-planete">Quatrième nom</p>
                    </div>  
                </div>
                <div class="bottom-box">
                    <img class="assis" src="./assets/image/perso-assis.png" alt="">         
                    <div class="box-text">
                        <h2 class="title-galaxy">Galaxie 2 : La technologie</h2>
                        <p class="text-galaxy">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec non erat vel est vehicula consequat vel in diam. Donec ultricies mollis hendrerit. Ut finibus tempus hendrerit. Fusce hendrerit mattis risus, tincidunt tempor augue consectetur ac. Donec quis enim ligula. Phasellus non porta dui. Aliquam sed rhoncus est, eget vehicula turpis. Donec dignissim hendrerit posuere. Integer aliquam ut nulla eget sollicitudin. Pellentesque at metus eget erat fringilla pharetra.</p>
                    </div>
                </div>
            </div>
            <div class="galaxy-slide">
                <div class="planetes">
                    <a href="./promo.html" class="planete1 flex-planete">
                        <img class="img-planete1" src="./assets/image/planete/1.svg" alt="Dessin de planète">
                        <p class="hover-planete">Premier nom</p>
                    </a>
                    
                    <div class="planete2 flex-planete">
                        <img class="img-planete2" src="./assets/image/planete/2.svg" alt="Dessin de planète">
                        <p class="hover-planete">Deuxième nom</p>
                    </div>
                    
                    <div class="planete3 flex-planete">
                        <img class="img-planete3" src="./assets/image/planete/3.svg" alt="Dessin de planète">
                        <p class="hover-planete">Troisième nom</p>
                    </div>
                    
                    <div class="planete4 flex-planete">
                        <img class="img-planete4" src="./assets/image/planete/4.svg" alt="Dessin de planète">
                        <p class="hover-planete">Quatrième nom</p>
                    </div>  
                </div>
                <div class="bottom-box">
                    <img class="assis" src="./assets/image/perso-assis.png" alt="">         
                    <div class="box-text">
                        <h2 class="title-galaxy">Galaxie 2 : La technologie</h2>
                        <p class="text-galaxy">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec non erat vel est vehicula consequat vel in diam. Donec ultricies mollis hendrerit. Ut finibus tempus hendrerit. Fusce hendrerit mattis risus, tincidunt tempor augue consectetur ac. Donec quis enim ligula. Phasellus non porta dui. Aliquam sed rhoncus est, eget vehicula turpis. Donec dignissim hendrerit posuere. Integer aliquam ut nulla eget sollicitudin. Pellentesque at metus eget erat fringilla pharetra.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="bullet">
            <span class="active"></span>
            <span></span>
        </div>
    </main>
    <script>
        
        const galaxyContainer = document.getElementById('galaxyContainer');
        const bulletsContainer = document.querySelector('.bullet');
        const bullets = document.querySelectorAll('.bullet span');

        let currentIndex = 0;
        let startX = 0;
        let isDragging = false;

        bullets.forEach((bullet, index) => {
            bullet.addEventListener('click', () => {
                currentIndex = index;
                updateGalaxy();
            });
        });

        galaxyContainer.addEventListener('pointerdown', handleDragStart);
        galaxyContainer.addEventListener('pointerup', handleDragEnd);
        galaxyContainer.addEventListener('pointermove', handleDragMove);

        function handleDragStart(e) {
            console.log('Drag start');
            startX = (e.type === 'touchstart') ? e.touches[0].clientX : e.clientX;
            isDragging = true;
        }

        function handleDragEnd() {
            console.log('Drag end');
            isDragging = false;
            updateGalaxy();
        }

        function handleDragMove(e) {
            console.log('Drag move');
            if (!isDragging) return;

            const clientX = (e.type === 'touchmove') ? e.touches[0].clientX : e.clientX;
            const distance = clientX - startX;

            if (distance > 50) {
                currentIndex = Math.max(0, currentIndex - 1);
            } else if (distance < -50) {
                currentIndex = Math.min(bullets.length - 1, currentIndex + 1);
            }
            updateGalaxy();
        }

        function updateGalaxy() {
            const translateValue = -currentIndex * 100;
            galaxyContainer.style.transform = `translateX(${translateValue}%)`;

            bullets.forEach((bullet, index) => {
                bullet.classList.toggle('active', index === currentIndex);
            });
        }

    </script>   
</body>
</html>
